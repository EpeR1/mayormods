====== Osztályok adminisztálása ======

Ezen az oldalon vehetünk fel új osztályokat, illetve módosíthatjuk a már felvett osztályok bizonyos adatait.

===== Új osztály felvétele =====

Az osztály képzési formája egy egyszerű tájékoztató jellegű információ, más jelentőssége nincs (egyenlőre). 

Fontos viszont az osztály indulásának és végzésének __tanéve__, ami a végzés esetén lehet könnyen téveszthető: a tanévet ugyanis a tanévkezdés évével jelöljük, így **a végzés tanéve általában eggyel kisebb, mint a végzés éve**! Meg kell adjuk még az osztály induláskori évfolyamát és jelét. Az osztály jel többnyire egy, esetleg két-három betű.

===== Osztály adatainak módodítása =====

A módosítani kivánt osztály kiválasztása előtt ellenőrizzük, hogy megfelelő tanév szerint nézzük-e az osztályokat, hiszen az osztályok jelei tanévenként változnak. Ha szükséges váltsunk tanévet (egyes osztályok esetleg meg sem jelennek a listában, ha nem megfelelő tanévet választunk).

Az osztály kiválasztása után lehetőségünk van a képzési információ szerkesztésére, valamint az osztályfőnöki megbizatás rögzítésére (megbizatást módosítani, törölni a felületről egyenlőre még nem tudunk).


===== Osztály tagjainak felvétele/frissítése adatállományból =====

Készítsünk egy tabulátorokkal tagolt szöveges állományt, melyben a fejléc sort az egyes tanulók adatait tároló sorok követik. A fejlécben érdemes a ''diak'' tábla mezőneveit használni, mert ekkor a program automatikusan felismeri ezeket. A ''diak'' tábla mezői:


  mysql> explain diak;
  +-------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------+-----+-------------------------+----------------+
  | Field                   | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Null | Key | Default                 | Extra          |
  +-------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------+-----+-------------------------+----------------+
  | diakId                  | int(10) unsigned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | NO   | PRI | NULL                    | auto_increment |
  | oId                     | bigint(20) unsigned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | YES  | UNI | NULL                    |                |
  | diakigazolvanySzam      | int(10) unsigned zerofill                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | YES  |     | NULL                    |                |
  | tajSzam                 | int(9) unsigned zerofill                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | YES  |     | NULL                    |                |
  | adoazonosito            | bigint(10) unsigned zerofill                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | YES  |     | NULL                    |                |
  | szemelyiIgazolvanySzam  | varchar(16)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | tartozkodasiOkiratSzam  | varchar(16)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | viseltNevElotag         | varchar(8)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | NO   |     |                         |                |
  | viseltCsaladinev        | varchar(64)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | NO   |     |                         |                |
  | viseltUtonev            | varchar(64)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | NO   |     |                         |                |
  | szuleteskoriNevElotag   | varchar(8)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | NO   |     |                         |                |
  | szuleteskoriCsaladinev  | varchar(64)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | NO   |     |                         |                |
  | szuleteskoriUtonev      | varchar(64)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | NO   |     |                         |                |
  | szuletesiHely           | varchar(16)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | szuletesiIdo            | date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | YES  |     | NULL                    |                |
  | nem                     | enum('fiú','lány')                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | YES  |     | NULL                    |                |
  | apaId                   | int(10) unsigned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | YES  | MUL | NULL                    |                |
  | gondviseloId            | int(10) unsigned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | YES  | MUL | NULL                    |                |
  | neveloId                | int(10) unsigned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | YES  |     | NULL                    |                |
  | anyaId                  | int(10) unsigned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | YES  | MUL | NULL                    |                |
  | allampolgarsag          | varchar(16)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | magyar                  |                |
  | lakhelyOrszag           | varchar(16)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | Magyarorsz�g            |                |
  | lakhelyHelyseg          | varchar(16)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | lakhelyIrsz             | varchar(8)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | YES  |     | NULL                    |                |
  | lakhelyKozteruletNev    | varchar(32)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | lakhelyKozteruletJelleg | enum('út','utca','útja','körút','tér','tere','körtér','köz','fasor','árok','lejtő','lakótelep','sétány','dűlő','átjáró','bástya','bástyája','domb','dűlőút','egyéb','elágazás','erdősor','fasora','forduló','főút','gát','hajóállomás','határsor','határút','hegy','helyrajzi szám','hídfő','játszótér','kapu','kert','kikötő','kilátó','körönd','körvasútsor','lakónegyed','lépcső','liget','major','mélykút','ösvény','park','parkja','part','piac','pihenő','puszta','rakpart','repülőtér','rét','sétaút','sor','sugárút','sziget','tanya','telep','udvar','üdülőpart','várkerület','vasútállomás','völgy','zug') | YES  |     | NULL                    |                |
  | lakhelyHazszam          | varchar(20)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | lakhelyEmelet           | varchar(5)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | YES  |     | NULL                    |                |
  | lakhelyAjto             | varchar(5)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | YES  |     | NULL                    |                |
  | tartOrszag              | varchar(16)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | Magyarorsz�g            |                |
  | tartHelyseg             | varchar(16)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | tartIrsz                | varchar(8)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | YES  |     | NULL                    |                |
  | tartKozteruletNev       | varchar(32)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | tartKozteruletJelleg    | enum('út','utca','útja','körút','tér','tere','körtér','köz','fasor','árok','lejtő','lakótelep','sétány','dűlő','átjáró','bástya','bástyája','domb','dűlőút','egyéb','elágazás','erdősor','fasora','forduló','főút','gát','hajóállomás','határsor','határút','hegy','helyrajzi szám','hídfő','játszótér','kapu','kert','kikötő','kilátó','körönd','körvasútsor','lakónegyed','lépcső','liget','major','mélykút','ösvény','park','parkja','part','piac','pihenő','puszta','rakpart','repülőtér','rét','sétaút','sor','sugárút','sziget','tanya','telep','udvar','üdülőpart','várkerület','vasútállomás','völgy','zug') | YES  |     | NULL                    |                |
  | tartHazszam             | varchar(20)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | tartEmelet              | varchar(5)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | YES  |     | NULL                    |                |
  | tartAjto                | varchar(5)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | YES  |     | NULL                    |                |
  | jogviszonyKezdete       | date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | YES  |     | NULL                    |                |
  | kezdoTanev              | smallint(5) unsigned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | NO   | MUL |                         |                |
  | kezdoSzemeszter         | tinyint(3) unsigned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | NO   |     |                         |                |
  | jogviszonyVege          | date                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | YES  |     | NULL                    |                |
  | telefon                 | varchar(64)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | mobil                   | varchar(64)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | email                   | varchar(96)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | YES  |     | NULL                    |                |
  | statusz                 | enum('jogviszonyban van','magántanuló','jogviszonya felfüggesztve','jogviszonya lezárva')                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | NO   |     | jogviszonyban van       |                |
  | penzugyiStatusz         | enum('állami finanszírozás','térítési díj','tandíj')                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | YES  |     | állami finanszírozás |                |
  | szocialisHelyzet        | set('szülei elváltak','három vagy több gyerekes család','rendszeres gyermekvédelmi támogatást kap','állami gondozott','veszélyeztetett','hátrányos helyzetű','halmozottan hátrányos helyzetű','sajátos nevelési igényű')                                                                                                                                                                                                                                                                                                                                                                                                                                                      | YES  |     | NULL                    |                |
  | fogyatekossag           | set('tartósan beteg','mozgássérült','beszédfogyatékos','hallássérült','látássérült','diszlexia','diszkalkulia','diszgráfia','tanulásban akadályozott','értelmileg akadályozott','autista','tanulási képességek kevert zavarával küzdő')                                                                                                                                                                                                                                                                                                                                                                                                                                   | YES  |     | NULL                    |                |
  | gondozasiSzam           | varchar(128)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | YES  |     | NULL                    |                |
  | elozoIskolaOMKod        | mediumint(8) unsigned zerofill                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | NO   |     |                         |                |
  | kollegista              | tinyint(3) unsigned                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | NO   |     | 0                       |                |
  +-------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------+-----+-------------------------+----------------+

Az általunk készített állományban nem kell minden mezőnek szerepelnie, fontos azonban, hogy új tanulók felvételekor a ''statusz'', ''jogviszonyKezdete'', ''kezdoTanev'', ''kezdoSzemeszter'' mezők
értékeinek megadása kötelező (adatfrissítéskor már nem), ezen kívül erősen ajánlott az oktatási azonosító (''oId'') megadása, ami az egyetlen megbízható kulcs mező. 
Végül megadhatjuk itt az osztályba kerülés (''beDt'') és várható kilépés (''kiDt'') dátumát is (bár ez utóbbit inkább akkor érdemes beállítani, mikor a tényleges kilépés meg is történik), 
ami ugyan nem a ''diak'' tábla mezője, de ezen az oldalon használható - az általános import oldal ([[naplo:admin:import|Admin/Import]]) működésétől ebben tér el az itteni importálás: 
a felvett/módosított diákokat a megadott dátummal fel is veszi a kiválasztott osztályba. Egy új tanulók adatait tartalmazó adatállomány tehát valahogy így nézhet ki:

  oId    viseltCsaladinev     viseltUtonev    kezdoTanev    kezdoSzemeszter    statusz    jogviszonyKezdete    beDt ...
  74864826801    Gipsz    Jakab    2007    1    jogviszonyban van    2007-08-01    2007-08-01 ...
  77138079743    Vincs    Eszter    2007    1    jogviszonyban van    2007-08-01    2007-08-01 ...
  ...

A fenti példában a Gipsz Jakab nevű új tanuló a 2007-2008-as tanév első szemeszterében került felvételre, osztályból való kikerülésének várható ideje 2009 június 30., osztályba kerülésének dátuma 2008. augusztus 1., ami egyúttal jogviszonyának kezdete is.

**Az adatállomány UTF-8 kódolású kell legyen!**

A kész állományt másoljuk fel a szerverre, például a ''/tmp'' könyvtárba, majd ennek az állománynak az elérési útját kell megadunk a beviteli mezőben.

A jóváhagyás után a program beolvassa a file első 5 sorát - mintaként. Ha a mezőneveket felismeri a program, akkor automatikusan rendeli hozzá őket egy-egy oszlophoz, amúgy ezt kézzel kell végrehajtanunk.

Mindenképp meg kell adnunk egy, vagy több mezőt, amit kulcsként használ majd a program a betöltés során. Ez azt jelenti, hogy egy sor betöltésekor, ha van már az adatbázisban vele azonos kulcsú, akkor a beszúrás (insert) helyett csak adatmódosítást (update) hajt végre.

==== Beíratlan tanulók előzetes felvétele ====

Ha a beiratkozás előtt előre be akarjuk tölteni a felvett tanulók adatait, akkor a következő formátumú állományt használjuk:

  oId     viseltCsaladinev        viseltUtonev    statusz jogviszonyKezdete       kezdoTanev      kezdoSzemeszter beDt
  7654321 Gipsz   Jakab   felvételt nyert \N      2012    1       2012-06-25

Fontos tehát, hogy a státusz "felvételt nyert", a jogviszony kezdetének dátuma viszont mág ismeretlen (NULL értékű, ezt jelzi a ''\N'').

