$(function() {

    $('input.date').change(function() {

	var ujSzemeszter_1_kezdesDt = $('#ujSzemeszter_1_kezdesDt').datetimepicker('getDate');
	var ujSzemeszter_1_zarasDt = $('#ujSzemeszter_1_zarasDt');
	var ujSzemeszter_2_kezdesDt = $('#ujSzemeszter_2_kezdesDt');
	var ujSzemeszter_2_zarasDt = $('#ujSzemeszter_2_zarasDt');

    });

    var ujSzemeszter_1_kezdesDt = $('#ujSzemeszter_1_kezdesDt');
    var ujSzemeszter_1_zarasDt = $('#ujSzemeszter_1_zarasDt');
    var ujSzemeszter_2_kezdesDt = $('#ujSzemeszter_2_kezdesDt');
    var ujSzemeszter_2_zarasDt = $('#ujSzemeszter_2_zarasDt');

    ujSzemeszter_1_kezdesDt.datetimepicker('option', 'onSelect',
        function (selectedDateTime) {
            ujSzemeszter_1_zarasDt.datetimepicker('option', 'minDate', ujSzemeszter_1_kezdesDt.datetimepicker('getDate') );
        }
    );
    ujSzemeszter_1_kezdesDt.datetimepicker('option', 'onClose',
        function(dateText, inst) {
            if (ujSzemeszter_1_zarasDt.val() != '') {
                var testStartDate = ujSzemeszter_1_kezdesDt.datetimepicker('getDate');
                var testEndDate = ujSzemeszter_1_zarasDt.datetimepicker('getDate');
                if (testStartDate > testEndDate)
                    ujSzemeszter_1_zarasDt.datetimepicker('setDate', testStartDate);
            } else {
                ujSzemeszter_1_zarasDt.val(dateText);
            }
        }
    );
    ujSzemeszter_1_zarasDt.datetimepicker('option', 'onSelect',
        function (selectedDateTime) {
            ujSzemeszter_1_kezdesDt.datetimepicker('option', 'maxDate', ujSzemeszter_1_zarasDt.datetimepicker('getDate') );
            ujSzemeszter_2_kezdesDt.datetimepicker('option', 'minDate', ujSzemeszter_1_zarasDt.datetimepicker('getDate') );
        }
    );
    ujSzemeszter_1_zarasDt.datetimepicker('option', 'onClose',
        function(dateText, inst) {
            if (ujSzemeszter_1_kezdesDt.val() != '') {
                var testStartDate = ujSzemeszter_1_kezdesDt.datetimepicker('getDate');
                var testEndDate = ujSzemeszter_1_zarasDt.datetimepicker('getDate');
                if (testStartDate > testEndDate)
                    ujSzemeszter_1_kezdesDt.datetimepicker('setDate', testEndDate);
            } else {
                ujSzemeszter_1_kezdesDt.val(dateText);
            }
        }
    );

    ujSzemeszter_2_kezdesDt.datetimepicker('option', 'onSelect',
        function (selectedDateTime) {
            ujSzemeszter_2_zarasDt.datetimepicker('option', 'minDate', ujSzemeszter_2_kezdesDt.datetimepicker('getDate') );
            ujSzemeszter_1_zarasDt.datetimepicker('option', 'maxDate', ujSzemeszter_2_kezdesDt.datetimepicker('getDate') );
        }
    );
    ujSzemeszter_2_kezdesDt.datetimepicker('option', 'onClose',
        function(dateText, inst) {
            if (ujSzemeszter_2_zarasDt.val() != '') {
                var testStartDate = ujSzemeszter_2_kezdesDt.datetimepicker('getDate');
                var testEndDate = ujSzemeszter_2_zarasDt.datetimepicker('getDate');
                if (testStartDate > testEndDate)
                    ujSzemeszter_2_zarasDt.datetimepicker('setDate', testStartDate);
            } else {
                ujSzemeszter_2_zarasDt.val(dateText);
            }
        }
    );
    ujSzemeszter_2_zarasDt.datetimepicker('option', 'onSelect',
        function (selectedDateTime) {
            ujSzemeszter_2_kezdesDt.datetimepicker('option', 'maxDate', ujSzemeszter_2_zarasDt.datetimepicker('getDate') );
        }
    );
    ujSzemeszter_2_zarasDt.datetimepicker('option', 'onClose',
        function(dateText, inst) {
            if (ujSzemeszter_2_kezdesDt.val() != '') {
                var testStartDate = ujSzemeszter_2_kezdesDt.datetimepicker('getDate');
                var testEndDate = ujSzemeszter_2_zarasDt.datetimepicker('getDate');
                if (testStartDate > testEndDate)
                    ujSzemeszter_2_kezdesDt.datetimepicker('setDate', testEndDate);
            } else {
                ujSzemeszter_2_kezdesDt.val(dateText);
            }
        }
    );

});
