$(function() {

    google.charts.load('current', {'packages':['calendar']});
    google.charts.setOnLoadCallback(drawChart);
    function drawChart() {
      var data = new google.visualization.DataTable();
	data.addColumn({ type: 'date', id: 'Date' });
       data.addColumn({ type: 'number', id: 'Won/Loss' });
	var DT = {};
	$('.dolgozatDATA').each(function(index) {
	    egy = $(this).data('dolgozatadat').split(':');
	    dt1 = egy[1].split('-');
	    dt2 = egy[2].split('-');
	    if (egy[2]=="" || egy[2]=='0000-00-00' || dt2<dt1) {dt2 = dt1;x=egy[1];} else x = egy[2];
	    if (DT[x]>=1) DT[x]++; else DT[x] = 1;
	    data.addRows(
		[
		    [ new Date(dt2), DT[x] ]
		]
	    );
	});
       var chart = new google.visualization.Calendar(document.getElementById('chart_div'));
       var options = {
	    title: "Dolgozatok",
	    height: 350,
	    colorAxis: {colors:['cornflowerblue','#ff0000']},
       };
       chart.draw(data, options);
    }


/*    google.charts.load('current', {'packages':['timeline']});
    google.charts.setOnLoadCallback(drawChart);
    function drawChart() {
      var data = new google.visualization.dataTable();
      data.addColumn('string', 'Tankör');
      data.addColumn('date', 'Dolgozat dátum');
      data.addColumn('date', '');
	$('.dolgozatDATA').each(function(index) {
	    egy = $(this).data('dolgozatadat').split(':');
	    dt1 = egy[1].split('-');
	    dt2 = egy[2].split('-');
	    if (egy[2]=="" || egy[2]=='0000-00-00' || dt2<dt1) dt2 = dt1;
	    data.addRows(
		[
		    [ egy[0], new Date(dt1),new Date(dt2) ]
		]
	    );
	});
      var options = {
        height: 450,
        timeline: {
          groupByRowLabel: true
        }
      };

      var chart = new google.visualization.Timeline(document.getElementById('chart_div'));

      chart.draw(data, options);
    }
*/
});
