showUpdateLayer = function() {
    takaroElem = $('#takaro');
    if (takaroElem) takaroElem.show();
    $('#updateWindow').show();
    $('updateForm').prop('tabindex',1);
    $('updateForm').focus();
}

$(function() { /* onload */
/*    $('#rejtMutat').click(function(event) {
        var element = $(event.target);
	$('.ujOra').fadeToggle('fast');
    });
*/
    $('.rejtMutat').click(function(event) {
	$(event.target).closest('tbody').find('.ujOra').fadeToggle('fast');
    });
    $('.torol').change(function(event) {
	/* rogton torolt class-uva tesszuk, akkor is, ha az ajaxRequestError van ... (lásd generikus callback) */
	var element = $(event.target);
	element.parents('tr').addClass('torolt');
	element.parents('tr').find('.l').empty();
    });
    $('body').click(function(event) {
	var x = $(event.target);
	if (x.hasClass('gomb DOA'))
	    x.prop('disabled', false);
    });
/*
    $('body').change(function(event) {
	var x = $(event.target); // itt kezelhetnénk a haladasi tankorvaltasbol adodo dolgot
    });
*/
    $('body').keypress(function(event) {
	var element = $(event.target);
	var charKeyCode = event.keyCode ? event.keyCode : event.which;
	var shiftKey = event.shiftKey ? event.shiftKey : ((charKeyCode == 16) ? true : false);
	var altKey = event.altKey ? event.altKey : ((charKeyCode == 18) ? true : false);
	var ctrlKey = event.ctrlKey ? event.ctrlKey : ((charKeyCode == 17) ? true : false);
	
	if(event.target.type=='text' && element.hasClass('data')) {
            if (charKeyCode==13) {
		event.preventDefault();
		element.parents('tr').nextAll(':not(.ujOra)').first().find('input[type=text]').focus();
	    }
	}
    });

// beépülő teszt! - később!

/*
    $('#nav2 li.icons').append('<span id="naploAlertIcon1" class="icon-bullhorn"></span>');
    $('#naploAlertIcon1').on('click', function() {
	//var params = $.parseParams(window.location.toString().split('?')[1] || '' );
        //var page=params.page?params.page:'';
        //var sub=params.sub?params.sub:'';
        //var f=params.f?params.f:'';
	url = location.toString().replace(/sub=([^&]*)/,'sub=haladasi').replace(/f=([^&]*)/,'f=haladasi');
//	window.location = url;
	$().redirect( url, { tanarId: "70", csakUres:"1" } );
    });    
*/

});

processJSON = function(json) {
    console.log(json.toDo);

    var elementId = "#ORAID_"+json.oraId.toString();
    if (json.toDo=='oraElmarad') {
	$(elementId).addClass('elmarad');
	    } else if (json.toDo == 'oraMegtartva') {
	$(elementId).removeClass();
    }
    $('#updateWindow').toggle();
    $('#takaro').toggle();

}
